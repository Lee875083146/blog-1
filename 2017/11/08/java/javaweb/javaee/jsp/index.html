<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">























<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/blog/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="JSP 教程   简介  什么是 Java Server Pages? 为什么使用 JSP？ JSP 的优势   JSP 工作原理  JSP 工作流程 JSP 生命周期   语法  脚本 JSP 声明 JSP 表达式 JSP 注释 控制语句 JSP 字面量   指令  Page 指令 Include 指令 Taglib 指令   JSP 动作元素  常见的属性 &amp;lt;jsp:include&amp;g">
<meta name="keywords" content="java,javaweb,javaee,jsp">
<meta property="og:type" content="article">
<meta property="og:title" content="JSP 教程">
<meta property="og:url" content="https://dunwu.github.io/2017/11/08/java/javaweb/javaee/jsp/index.html">
<meta property="og:site_name" content="静默虚空的博客">
<meta property="og:description" content="JSP 教程   简介  什么是 Java Server Pages? 为什么使用 JSP？ JSP 的优势   JSP 工作原理  JSP 工作流程 JSP 生命周期   语法  脚本 JSP 声明 JSP 表达式 JSP 注释 控制语句 JSP 字面量   指令  Page 指令 Include 指令 Taglib 指令   JSP 动作元素  常见的属性 &amp;lt;jsp:include&amp;g">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp_life_cycle.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp_hello_world.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/4F744CC9-E484-45BA-AF18-27AFCF4AD45C.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/6AC33FBA-0B76-4BFD-A690-E856E9E01900.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/D7AD87A8-3392-4D4E-8731-18806B0644CD.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp-expression-language.jpg">
<meta property="og:updated_time" content="2019-04-25T02:50:42.074Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JSP 教程">
<meta name="twitter:description" content="JSP 教程   简介  什么是 Java Server Pages? 为什么使用 JSP？ JSP 的优势   JSP 工作原理  JSP 工作流程 JSP 生命周期   语法  脚本 JSP 声明 JSP 表达式 JSP 注释 控制语句 JSP 字面量   指令  Page 指令 Include 指令 Taglib 指令   JSP 动作元素  常见的属性 &amp;lt;jsp:include&amp;g">
<meta name="twitter:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg">



  <link rel="alternate" href="/blog/atom.xml" title="静默虚空的博客" type="application/atom+xml">




  <link rel="canonical" href="https://dunwu.github.io/2017/11/08/java/javaweb/javaee/jsp/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>JSP 教程 | 静默虚空的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">静默虚空的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">大道至简，知易行难</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/blog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/blog/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/blog/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/blog/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/blog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  
  
  

  

  <a href="https://github.com/dunwu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill: #222; color: #fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/2017/11/08/java/javaweb/javaee/jsp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="静默虚空的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">JSP 教程<a href="https://github.com/dunwu/blog/blob/master/source/_posts/java/javaweb/javaee/jsp.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil"></i></a>

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-11-08 00:00:00" itemprop="dateCreated datePublished" datetime="2017-11-08T00:00:00+08:00">2017-11-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-25 10:50:42" itemprop="dateModified" datetime="2019-04-25T10:50:42+08:00">2019-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/java/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/java/javaweb/javaee/" itemprop="url" rel="index"><span itemprop="name">javaee</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">37k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">34 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="jsp-教程"><a class="markdownIt-Anchor" href="#jsp-教程"></a> JSP 教程</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">简介</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-java-server-pages">什么是 Java Server Pages?</a></li>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-jsp">为什么使用 JSP？</a></li>
<li><a href="#jsp-%E7%9A%84%E4%BC%98%E5%8A%BF">JSP 的优势</a></li>
</ul>
</li>
<li><a href="#jsp-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">JSP 工作原理</a>
<ul>
<li><a href="#jsp-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">JSP 工作流程</a></li>
<li><a href="#jsp-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">JSP 生命周期</a></li>
</ul>
</li>
<li><a href="#%E8%AF%AD%E6%B3%95">语法</a>
<ul>
<li><a href="#%E8%84%9A%E6%9C%AC">脚本</a></li>
<li><a href="#jsp-%E5%A3%B0%E6%98%8E">JSP 声明</a></li>
<li><a href="#jsp-%E8%A1%A8%E8%BE%BE%E5%BC%8F">JSP 表达式</a></li>
<li><a href="#jsp-%E6%B3%A8%E9%87%8A">JSP 注释</a></li>
<li><a href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5">控制语句</a></li>
<li><a href="#jsp-%E5%AD%97%E9%9D%A2%E9%87%8F">JSP 字面量</a></li>
</ul>
</li>
<li><a href="#%E6%8C%87%E4%BB%A4">指令</a>
<ul>
<li><a href="#page-%E6%8C%87%E4%BB%A4">Page 指令</a></li>
<li><a href="#include-%E6%8C%87%E4%BB%A4">Include 指令</a></li>
<li><a href="#taglib-%E6%8C%87%E4%BB%A4">Taglib 指令</a></li>
</ul>
</li>
<li><a href="#jsp-%E5%8A%A8%E4%BD%9C%E5%85%83%E7%B4%A0">JSP 动作元素</a>
<ul>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B1%9E%E6%80%A7">常见的属性</a></li>
<li><a href="#jspinclude"><code>&lt;jsp:include&gt;</code></a></li>
<li><a href="#jspusebean"><code>&lt;jsp:useBean&gt;</code></a></li>
<li><a href="#jspsetproperty"><code>&lt;jsp:setProperty&gt;</code></a></li>
<li><a href="#jspgetproperty"><code>&lt;jsp:getProperty&gt;</code></a></li>
<li><a href="#jspforward"><code>&lt;jsp:forward&gt;</code></a></li>
<li><a href="#jspplugin"><code>&lt;jsp:plugin&gt;</code></a></li>
<li><a href="#jspelement--jspattributejspbody"><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code></a></li>
<li><a href="#jsptext"><code>&lt;jsp:text&gt;</code></a></li>
</ul>
</li>
<li><a href="#jsp-%E9%9A%90%E5%BC%8F%E5%AF%B9%E8%B1%A1">JSP 隐式对象</a>
<ul>
<li><a href="#request-%E5%AF%B9%E8%B1%A1">request 对象</a></li>
<li><a href="#response-%E5%AF%B9%E8%B1%A1">response 对象</a></li>
<li><a href="#out-%E5%AF%B9%E8%B1%A1">out 对象</a></li>
<li><a href="#session-%E5%AF%B9%E8%B1%A1">session 对象</a></li>
<li><a href="#application-%E5%AF%B9%E8%B1%A1">application 对象</a></li>
<li><a href="#config-%E5%AF%B9%E8%B1%A1">config 对象</a></li>
<li><a href="#pagecontext-%E5%AF%B9%E8%B1%A1">pageContext 对象</a></li>
<li><a href="#page-%E5%AF%B9%E8%B1%A1">page 对象</a></li>
<li><a href="#exception-%E5%AF%B9%E8%B1%A1">exception 对象</a></li>
</ul>
</li>
<li><a href="#el-%E8%A1%A8%E8%BE%BE%E5%BC%8F">EL 表达式</a>
<ul>
<li><a href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%AF%AD%E6%B3%95">一个简单的语法</a></li>
<li><a href="#el-%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E7%AC%A6">EL 中的基础操作符</a></li>
<li><a href="#jsp-el-%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0">JSP EL 中的函数</a></li>
<li><a href="#jsp-el-%E9%9A%90%E5%90%AB%E5%AF%B9%E8%B1%A1">JSP EL 隐含对象</a></li>
<li><a href="#pagecontext-%E5%AF%B9%E8%B1%A1-1">pageContext 对象</a></li>
<li><a href="#scope-%E5%AF%B9%E8%B1%A1">Scope 对象</a></li>
<li><a href="#param-%E5%92%8C-paramvalues-%E5%AF%B9%E8%B1%A1">param 和 paramValues 对象</a></li>
<li><a href="#header-%E5%92%8C-headervalues-%E5%AF%B9%E8%B1%A1">header 和 headerValues 对象</a></li>
</ul>
</li>
<li><a href="#jstl">JSTL</a>
<ul>
<li><a href="#jstl-%E5%BA%93%E5%AE%89%E8%A3%85">JSTL 库安装</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE">核心标签</a></li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE">格式化标签</a></li>
<li><a href="#sql-%E6%A0%87%E7%AD%BE">SQL 标签</a></li>
<li><a href="#xml-%E6%A0%87%E7%AD%BE">XML 标签</a></li>
<li><a href="#jstl-%E5%87%BD%E6%95%B0">JSTL 函数</a></li>
</ul>
</li>
<li><a href="#taglib">Taglib</a>
<ul>
<li><a href="#jsp-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE">JSP 自定义标签</a></li>
<li><a href="#%E5%88%9B%E5%BB%BAhello%E6%A0%87%E7%AD%BE">创建&quot;Hello&quot;标签</a></li>
<li><a href="#%E8%AE%BF%E9%97%AE%E6%A0%87%E7%AD%BE%E4%BD%93">访问标签体</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E5%B1%9E%E6%80%A7">自定义标签属性</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h2>
<h3 id="什么是-java-server-pages"><a class="markdownIt-Anchor" href="#什么是-java-server-pages"></a> 什么是 Java Server Pages?</h3>
<p><code>JSP</code>全称<code>Java Server Pages</code>，是一种动态网页开发技术。</p>
<p>它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以<code>&lt;%</code>开头以<code>%&gt;</code>结束。</p>
<p>JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、XHTML 代码、XML 元素以及嵌入 JSP 操作和命令来编写 JSP。</p>
<p>JSP 通过网页表单获取用户输入数据、访问数据库及其他数据源，然后动态地创建网页。</p>
<p>JSP 标签有多种功能，比如访问数据库、记录用户选择信息、访问 JavaBeans 组件等，还可以在不同的网页中传递控制信息和共享信息。</p>
<h3 id="为什么使用-jsp"><a class="markdownIt-Anchor" href="#为什么使用-jsp"></a> 为什么使用 JSP？</h3>
<p>JSP 也是一种 Servlet，因此 JSP 能够完成 Servlet 能完成的任何工作。</p>
<p>JSP 程序与 CGI 程序有着相似的功能，但和 CGI 程序相比，JSP 程序有如下优势：</p>
<ul>
<li>性能更加优越，因为 JSP 可以直接在 HTML 网页中动态嵌入元素而不需要单独引用 CGI 文件。</li>
<li>服务器调用的是已经编译好的 JSP 文件，而不像 CGI/Perl 那样必须先载入解释器和目标脚本。</li>
<li>JSP 基于 Java Servlets API，因此，JSP 拥有各种强大的企业级 Java API，包括 JDBC，JNDI，EJB，JAXP 等等。</li>
<li>JSP 页面可以与处理业务逻辑的 servlets 一起使用，这种模式被 Java servlet 模板引擎所支持。</li>
</ul>
<p>最后，JSP 是 Java EE 不可或缺的一部分，是一个完整的企业级应用平台。这意味着 JSP 可以用最简单的方式来实现最复杂的应用。</p>
<h3 id="jsp-的优势"><a class="markdownIt-Anchor" href="#jsp-的优势"></a> JSP 的优势</h3>
<p>以下列出了使用 JSP 带来的其他好处：</p>
<ul>
<li>与 ASP 相比：JSP 有两大优势。首先，动态部分用 Java 编写，而不是 VB 或其他 MS 专用语言，所以更加强大与易用。第二点就是 JSP 易于移植到非 MS 平台上。</li>
<li>与纯 Servlets 相比：JSP 可以很方便的编写或者修改 HTML 网页而不用去面对大量的 println 语句。</li>
<li>与 SSI 相比：SSI 无法使用表单数据、无法进行数据库链接。</li>
<li>与 JavaScript 相比：虽然 JavaScript 可以在客户端动态生成 HTML，但是很难与服务器交互，因此不能提供复杂的服务，比如访问数据库和图像处理等等。</li>
<li>与静态 HTML 相比：静态 HTML 不包含动态信息。</li>
</ul>
<h2 id="jsp-工作原理"><a class="markdownIt-Anchor" href="#jsp-工作原理"></a> JSP 工作原理</h2>
<p><strong>JSP 是一种 Servlet</strong>，但工作方式和 Servlet 有所差别。</p>
<p>Servlet 是先将源代码编译为 class 文件后部署到服务器下的，<strong>先编译后部署</strong>。</p>
<p>Jsp 是先将源代码部署到服务器再编译，<strong>先部署后编译</strong>。</p>
<p>Jsp 会在客户端第一次请求 Jsp 文件时被编译为 HttpJspPage 类（Servlet 的一个子类）。该类会被服务器临时存放在服务器工作目录里。所以，第一次请求 Jsp 后，访问速度会变快就是这个道理。</p>
<h3 id="jsp-工作流程"><a class="markdownIt-Anchor" href="#jsp-工作流程"></a> JSP 工作流程</h3>
<p>网络服务器需要一个 JSP 引擎，也就是一个容器来处理 JSP 页面。容器负责截获对 JSP 页面的请求。本教程使用内嵌 JSP 容器的 Apache 来支持 JSP 开发。</p>
<p>JSP 容器与 Web 服务器协同合作，为 JSP 的正常运行提供必要的运行环境和其他服务，并且能够正确识别专属于 JSP 网页的特殊元素。</p>
<p>下图显示了 JSP 容器和 JSP 文件在 Web 应用中所处的位置。</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg"></div>
<h4 id="工作步骤"><a class="markdownIt-Anchor" href="#工作步骤"></a> 工作步骤</h4>
<p>以下步骤表明了 Web 服务器是如何使用 JSP 来创建网页的：</p>
<ul>
<li>就像其他普通的网页一样，您的浏览器发送一个 HTTP 请求给服务器。</li>
<li>Web 服务器识别出这是一个对 JSP 网页的请求，并且将该请求传递给 JSP 引擎。通过使用 URL 或者.jsp 文件来完成。</li>
<li>JSP 引擎从磁盘中载入 JSP 文件，然后将它们转化为 servlet。这种转化只是简单地将所有模板文本改用 println()语句，并且将所有的 JSP 元素转化成 Java 代码。</li>
<li>JSP 引擎将 servlet 编译成可执行类，并且将原始请求传递给 servlet 引擎。</li>
<li>Web 服务器的某组件将会调用 servlet 引擎，然后载入并执行 servlet 类。在执行过程中，servlet 产生 HTML 格式的输出并将其内嵌于 HTTP response 中上交给 Web 服务器。</li>
<li>Web 服务器以静态 HTML 网页的形式将 HTTP response 返回到您的浏览器中。</li>
<li>最终，Web 浏览器处理 HTTP response 中动态产生的 HTML 网页，就好像在处理静态网页一样。</li>
</ul>
<p>以上提及到的步骤可以用下图来表示：</p>
<p>一般情况下，JSP 引擎会检查 JSP 文件对应的 servlet 是否已经存在，并且检查 JSP 文件的修改日期是否早于 servlet。如果 JSP 文件的修改日期早于对应的 servlet，那么容器就可以确定 JSP 文件没有被修改过并且 servlet 有效。这使得整个流程与其他脚本语言（比如 PHP）相比要高效快捷一些。</p>
<h3 id="jsp-生命周期"><a class="markdownIt-Anchor" href="#jsp-生命周期"></a> JSP 生命周期</h3>
<p>理解 JSP 底层功能的关键就是去理解它们所遵守的生命周期。</p>
<p>JSP 生命周期就是从创建到销毁的整个过程，类似于 servlet 生命周期，区别在于 JSP 生命周期还包括将 JSP 文件编译成 servlet。</p>
<p>以下是 JSP 生命周期中所走过的几个阶段：</p>
<ul>
<li>**编译阶段：**servlet 容器编译 servlet 源文件，生成 servlet 类</li>
<li>**初始化阶段：**加载与 JSP 对应的 servlet 类，创建其实例，并调用它的初始化方法</li>
<li>**执行阶段：**调用与 JSP 对应的 servlet 实例的服务方法</li>
<li>**销毁阶段：**调用与 JSP 对应的 servlet 实例的销毁方法，然后销毁 servlet 实例</li>
</ul>
<p>很明显，JSP 生命周期的四个主要阶段和 servlet 生命周期非常相似，下面给出图示：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_life_cycle.jpg"></div>
<h4 id="jsp-编译"><a class="markdownIt-Anchor" href="#jsp-编译"></a> JSP 编译</h4>
<p>当浏览器请求 JSP 页面时，JSP 引擎会首先去检查是否需要编译这个文件。如果这个文件没有被编译过，或者在上次编译后被更改过，则编译这个 JSP 文件。</p>
<p>编译的过程包括三个步骤：</p>
<ul>
<li>解析 JSP 文件。</li>
<li>将 JSP 文件转为 servlet。</li>
<li>编译 servlet。</li>
</ul>
<h4 id="jsp-初始化"><a class="markdownIt-Anchor" href="#jsp-初始化"></a> JSP 初始化</h4>
<p>容器载入 JSP 文件后，它会在为请求提供任何服务前调用 jspInit()方法。如果您需要执行自定义的 JSP 初始化任务，复写 jspInit()方法就行了，就像下面这样：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// 初始化代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一般来讲程序只初始化一次，servlet 也是如此。通常情况下您可以在 jspInit()方法中初始化数据库连接、打开文件和创建查询表。</p>
<h4 id="jsp-执行"><a class="markdownIt-Anchor" href="#jsp-执行"></a> JSP 执行</h4>
<p>这一阶段描述了 JSP 生命周期中一切与请求相关的交互行为，直到被销毁。</p>
<p>当 JSP 网页完成初始化后，JSP 引擎将会调用_jspService()方法。</p>
<p>_jspService()方法需要一个 HttpServletRequest 对象和一个 HttpServletResponse 对象作为它的参数，就像下面这样：</p>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> _jspService(HttpServletRequest request,</span><br><span class="line">                 HttpServletResponse response)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// 服务端处理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>_jspService()</code> 方法在每个 request 中被调用一次并且负责产生与之相对应的 response，并且它还负责产生所有 7 个 HTTP 方法的回应，比如 GET、POST、DELETE 等等。</p>
<h4 id="jsp-清理"><a class="markdownIt-Anchor" href="#jsp-清理"></a> JSP 清理</h4>
<p>JSP 生命周期的销毁阶段描述了当一个 JSP 网页从容器中被移除时所发生的一切。</p>
<p>jspDestroy()方法在 JSP 中等价于 servlet 中的销毁方法。当您需要执行任何清理工作时复写 jspDestroy()方法，比如释放数据库连接或者关闭文件夹等等。</p>
<p>jspDestroy()方法的格式如下：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">// 清理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="语法"><a class="markdownIt-Anchor" href="#语法"></a> 语法</h2>
<h3 id="脚本"><a class="markdownIt-Anchor" href="#脚本"></a> 脚本</h3>
<p>脚本程序可以包含任意量的 Java 语句、变量、方法或表达式，只要它们在脚本语言中是有效的。</p>
<p>脚本程序的语法格式：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;% 代码片段 %&gt;</span><br></pre></td></tr></table></figure>
<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;jsp:scriptlet&gt;</span><br><span class="line">   代码片段</span><br><span class="line">&lt;/jsp:scriptlet&gt;</span><br></pre></td></tr></table></figure>
<p>任何文本、HTML 标签、JSP 元素必须写在脚本程序的外面。</p>
<p>下面给出一个示例，同时也是本教程的第一个 JSP 示例：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">Hello World!&lt;br/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.println(<span class="string">"Your IP address is "</span> + request.getRemoteAddr());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>**注意：**请确保 Apache Tomcat 已经安装在 C:\apache-tomcat-7.0.2 目录下并且运行环境已经正确设置。</p>
<p>将以上代码保存在 hello.jsp 中，然后将它放置在 C:\apache-tomcat-7.0.2\webapps\ROOT 目录下，打开浏览器并在地址栏中输入http://localhost:8080/hello.jsp。运行后得到以下结果：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_hello_world.jpg"></div>
<h4 id="中文编码问题"><a class="markdownIt-Anchor" href="#中文编码问题"></a> 中文编码问题</h4>
<p>如果我们要在页面正常显示中文，我们需要在 JSP 文件头部添加以下代码：&lt;&gt;</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br></pre></td></tr></table></figure>
<p>接下来我们将以上程序修改为：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">Hello World!&lt;br/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.println(<span class="string">"你的 IP 地址 "</span> + request.getRemoteAddr());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>这样中文就可以正常显示了。</p>
<h3 id="jsp-声明"><a class="markdownIt-Anchor" href="#jsp-声明"></a> JSP 声明</h3>
<p>一个声明语句可以声明一个或多个变量、方法，供后面的 Java 代码使用。在 JSP 文件中，您必须先声明这些变量和方法然后才能使用它们。</p>
<p>JSP 声明的语法格式：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%! declaration; [ declaration; ]+ ... %&gt;</span><br></pre></td></tr></table></figure>
<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;jsp:declaration&gt;</span><br><span class="line">   代码片段</span><br><span class="line">&lt;/jsp:declaration&gt;</span><br></pre></td></tr></table></figure>
<p>程序示例：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> i = <span class="number">0</span>; %&gt;</span><br><span class="line">&lt;%! <span class="keyword">int</span> a, b, c; %&gt;</span><br><span class="line">&lt;%! Circle a = <span class="keyword">new</span> Circle(<span class="number">2.0</span>); %&gt;</span><br></pre></td></tr></table></figure>
<h3 id="jsp-表达式"><a class="markdownIt-Anchor" href="#jsp-表达式"></a> JSP 表达式</h3>
<p>一个 JSP 表达式中包含的脚本语言表达式，先被转化成 String，然后插入到表达式出现的地方。</p>
<p>由于表达式的值会被转化成 String，所以您可以在一个文本行中使用表达式而不用去管它是否是 HTML 标签。</p>
<p>表达式元素中可以包含任何符合 Java 语言规范的表达式，但是不能使用分号来结束表达式。</p>
<p>JSP 表达式的语法格式：</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">&lt;<span class="meta">%</span>= 表达式 <span class="meta">%</span>&gt;</span><br></pre></td></tr></table></figure>
<p>同样，您也可以编写与之等价的 XML 语句：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:expression</span>&gt;</span></span><br><span class="line">   表达式</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:expression</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>程序示例：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">   今天的日期是: <span class="tag">&lt;<span class="name">%=</span> (<span class="attr">new</span> <span class="attr">java.util.Date</span>())<span class="attr">.toLocaleString</span>()%&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">今天的日期是: <span class="number">2016</span><span class="number">-6</span><span class="number">-25</span> <span class="number">13</span>:<span class="number">40</span>:<span class="number">07</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="jsp-注释"><a class="markdownIt-Anchor" href="#jsp-注释"></a> JSP 注释</h3>
<p>JSP 注释主要有两个作用：为代码作注释以及将某段代码注释掉。</p>
<p>JSP 注释的语法格式：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;JSP注释示例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%-- 该部分注释在网页中不会被显示--%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">   今天的日期是: &lt;%= (<span class="keyword">new</span> java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">今天的日期是: <span class="number">2016</span><span class="number">-6</span><span class="number">-25</span> <span class="number">13</span>:<span class="number">41</span>:<span class="number">26</span></span><br></pre></td></tr></table></figure>
<p>不同情况下使用注释的语法规则：</p>
<table>
<thead>
<tr>
<th><strong>语法</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;%-- 注释 --%&gt;</td>
<td>JSP 注释，注释内容不会被发送至浏览器甚至不会被编译</td>
</tr>
<tr>
<td><!-- 注释 --></td>
<td>HTML 注释，通过浏览器查看网页源代码时可以看见注释内容</td>
</tr>
<tr>
<td>&lt;%</td>
<td>代表静态 &lt;%常量</td>
</tr>
<tr>
<td>%&gt;</td>
<td>代表静态 %&gt; 常量</td>
</tr>
<tr>
<td>’</td>
<td>在属性中使用的单引号</td>
</tr>
<tr>
<td>&quot;</td>
<td>在属性中使用的双引号</td>
</tr>
</tbody>
</table>
<h3 id="控制语句"><a class="markdownIt-Anchor" href="#控制语句"></a> 控制语句</h3>
<p>JSP 提供对 Java 语言的全面支持。您可以在 JSP 程序中使用 Java API 甚至建立 Java 代码块，包括判断语句和循环语句等等。</p>
<h4 id="ifelse-语句"><a class="markdownIt-Anchor" href="#ifelse-语句"></a> if…else 语句</h4>
<p><code>If…else</code>块，请看下面这个例子：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">         pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%! <span class="keyword">int</span> day = <span class="number">1</span>; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">  &lt;title&gt;02.JSP语法 - if...else示例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;IF...ELSE 实例&lt;/h3&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span> (day == <span class="number">1</span> | day == <span class="number">7</span>) &#123; %&gt;</span><br><span class="line">&lt;p&gt;今天是周末&lt;/p&gt;</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> &#123; %&gt;</span><br><span class="line">&lt;p&gt;今天不是周末&lt;/p&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">IF</span></span>...<span class="keyword">ELSE</span> 实例</span><br><span class="line">今天不是周末</span><br></pre></td></tr></table></figure>
<h4 id="switchcase-语句"><a class="markdownIt-Anchor" href="#switchcase-语句"></a> switch…case 语句</h4>
<p>现在来看看 switch…case 块，与 if…else 块有很大的不同，它使用 out.println()，并且整个都装在脚本程序的标签中，就像下面这样：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">         pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%! <span class="keyword">int</span> day = <span class="number">3</span>; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">  &lt;title&gt;02.JSP语法 - switch...case示例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;Sswitch...case示例&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  <span class="keyword">switch</span>(day) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      out.println(<span class="string">"星期天"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      out.println(<span class="string">"星期一"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      out.println(<span class="string">"星期二"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">      out.println(<span class="string">"星期三"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">      out.println(<span class="string">"星期四"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">      out.println(<span class="string">"星期五"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      out.println(<span class="string">"星期六"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>浏览器访问，运行后得出以下结果：</p>
<figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SWITCH</span>...<span class="keyword">CASE</span> 实例</span><br><span class="line"></span><br><span class="line">星期三</span><br></pre></td></tr></table></figure>
<h4 id="循环语句"><a class="markdownIt-Anchor" href="#循环语句"></a> 循环语句</h4>
<p>在 JSP 程序中可以使用 Java 的三个基本循环类型：for，while，和 do…while。</p>
<p>让我们来看看 for 循环的例子，以下输出的不同字体大小的&quot;菜鸟教程&quot;：</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span></span><br><span class="line"><span class="xml">    pageEncoding="UTF-8"%&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%!</span> <span class="attr">int</span> <span class="attr">fontSize</span>; %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>For 循环实例<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%for</span> ( <span class="attr">fontSize</span> = <span class="string">1;</span> <span class="attr">fontSize</span> &lt;= <span class="string">3;</span> <span class="attr">fontSize</span>++)&#123; %&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"green"</span> <span class="attr">size</span>=<span class="string">"&lt;%= fontSize %&gt;"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    菜鸟教程</span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%&#125;%</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg"></div>
<p>将上例改用 while 循环来写：</p>
<figure class="highlight mojolicious"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="perl">@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="perl">    pageEncoding=<span class="string">"UTF-8"</span></span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="perl">! <span class="keyword">int</span> fontSize; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>While 循环实例<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="perl"><span class="keyword">while</span> ( fontSize &lt;= <span class="number">3</span>)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"green"</span> <span class="attr">size</span>=<span class="string">"&lt;%=</span></span></span><span class="perl"> fontSize </span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    菜鸟教程</span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="perl">fontSize++;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="perl">&#125;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>浏览器访问，输出结果为（fontSize 初始化为 0，所以多输出了一行）：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/4F744CC9-E484-45BA-AF18-27AFCF4AD45C.jpg"></div>
<p>JSP 运算符</p>
<p>JSP 支持所有 Java 逻辑和算术运算符。</p>
<p>下表罗列出了 JSP 常见运算符，优先级从高到底：</p>
<table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>操作符</strong></th>
<th><strong>结合性</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>后缀</td>
<td>() [] . (点运算符)</td>
<td>左到右</td>
</tr>
<tr>
<td>一元</td>
<td>++ - - ! ~</td>
<td>右到左</td>
</tr>
<tr>
<td>可乘性</td>
<td>* / %</td>
<td>左到右</td>
</tr>
<tr>
<td>可加性</td>
<td>+ -</td>
<td>左到右</td>
</tr>
<tr>
<td>移位</td>
<td>&gt;&gt; &gt;&gt;&gt; &lt;&lt;</td>
<td>左到右</td>
</tr>
<tr>
<td>关系</td>
<td>&gt; &gt;= &lt; &lt;=</td>
<td>左到右</td>
</tr>
<tr>
<td>相等/不等</td>
<td>== !=</td>
<td>左到右</td>
</tr>
<tr>
<td>位与</td>
<td>&amp;</td>
<td>左到右</td>
</tr>
<tr>
<td>位异或</td>
<td>^</td>
<td>左到右</td>
</tr>
<tr>
<td>位或</td>
<td>|</td>
<td>左到右</td>
</tr>
<tr>
<td>逻辑与</td>
<td>&amp;&amp;</td>
<td>左到右</td>
</tr>
<tr>
<td>逻辑或</td>
<td>||</td>
<td>左到右</td>
</tr>
<tr>
<td>条件判断</td>
<td>?:</td>
<td>右到左</td>
</tr>
<tr>
<td>赋值</td>
<td>= += -= *= /= %= &gt;&gt;= &lt;&lt;= &amp;= ^= |=</td>
<td>右到左</td>
</tr>
<tr>
<td>逗号</td>
<td>,</td>
<td>左到右</td>
</tr>
</tbody>
</table>
<h3 id="jsp-字面量"><a class="markdownIt-Anchor" href="#jsp-字面量"></a> JSP 字面量</h3>
<p>JSP 语言定义了以下几个字面量：</p>
<ul>
<li>布尔值(boolean)：true 和 false;</li>
<li>整型(int)：与 Java 中的一样;</li>
<li>浮点型(float)：与 Java 中的一样;</li>
<li>字符串(string)：以单引号或双引号开始和结束;</li>
<li>Null：null。</li>
</ul>
<h2 id="指令"><a class="markdownIt-Anchor" href="#指令"></a> 指令</h2>
<p>JSP 指令用来设置整个 JSP 页面相关的属性，如网页的编码方式和脚本语言。</p>
<p>JSP 指令以开<code>&lt;%@</code>开始，以<code>%&gt;</code>结束。</p>
<p>JSP 指令语法格式如下：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ directive attribute=<span class="string">"value"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>指令可以有很多个属性，它们以键值对的形式存在，并用逗号隔开。</p>
<p>JSP 中的三种指令标签：</p>
<table>
<thead>
<tr>
<th><strong>指令</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;%@ page ... %&gt;</code></td>
<td>定义网页依赖属性，比如脚本语言、error 页面、缓存需求等等</td>
</tr>
<tr>
<td><code>&lt;%@ include ... %&gt;</code></td>
<td>包含其他文件</td>
</tr>
<tr>
<td><code>&lt;%@ taglib ... %&gt;</code></td>
<td>引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody>
</table>
<h3 id="page-指令"><a class="markdownIt-Anchor" href="#page-指令"></a> Page 指令</h3>
<p>Page 指令为容器提供当前页面的使用说明。一个 JSP 页面可以包含多个<code>page</code>指令。</p>
<p>Page 指令的语法格式：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page attribute=<span class="string">"value"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>等价的 XML 格式：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;jsp:directive.page attribute=<span class="string">"value"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span> %&gt;</span><br></pre></td></tr></table></figure>
<h4 id="属性"><a class="markdownIt-Anchor" href="#属性"></a> 属性</h4>
<p>下表列出与 Page 指令相关的属性：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>buffer</td>
<td>指定 out 对象使用缓冲区的大小</td>
</tr>
<tr>
<td>autoFlush</td>
<td>控制 out 对象的 缓存区</td>
</tr>
<tr>
<td>contentType</td>
<td>指定当前 JSP 页面的 MIME 类型和字符编码</td>
</tr>
<tr>
<td>errorPage</td>
<td>指定当 JSP 页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td>isErrorPage</td>
<td>指定当前页面是否可以作为另一个 JSP 页面的错误处理页面</td>
</tr>
<tr>
<td>extends</td>
<td>指定 servlet 从哪一个类继承</td>
</tr>
<tr>
<td>import</td>
<td>导入要使用的 Java 类</td>
</tr>
<tr>
<td>info</td>
<td>定义 JSP 页面的描述信息</td>
</tr>
<tr>
<td>isThreadSafe</td>
<td>指定对 JSP 页面的访问是否为线程安全</td>
</tr>
<tr>
<td>language</td>
<td>定义 JSP 页面所用的脚本语言，默认是 Java</td>
</tr>
<tr>
<td>session</td>
<td>指定 JSP 页面是否使用 session</td>
</tr>
<tr>
<td>isELIgnored</td>
<td>指定是否执行 EL 表达式</td>
</tr>
<tr>
<td>isScriptingEnabled</td>
<td>确定脚本元素能否被使用</td>
</tr>
</tbody>
</table>
<h3 id="include-指令"><a class="markdownIt-Anchor" href="#include-指令"></a> Include 指令</h3>
<p>JSP 可以通过<code>include</code>指令来包含其他文件。</p>
<p>被包含的文件可以是 JSP 文件、HTML 文件或文本文件。包含的文件就好像是该 JSP 文件的一部分，会被同时编译执行。</p>
<p>Include 指令的语法格式如下：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">"文件相对 url 地址"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p><strong>include</strong> 指令中的文件名实际上是一个相对的 URL 地址。</p>
<p>如果您没有给文件关联一个路径，JSP 编译器默认在当前路径下寻找。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;jsp:directive.include file=<span class="string">"文件相对 url 地址"</span> /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="taglib-指令"><a class="markdownIt-Anchor" href="#taglib-指令"></a> Taglib 指令</h3>
<p>JSP 允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p><code>taglib</code>指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<p><code>taglib</code>指令的语法：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib uri=<span class="string">"uri"</span> prefix=<span class="string">"prefixOfTag"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>uri 属性确定标签库的位置，prefix 属性指定标签库的前缀。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;jsp:directive.taglib uri=<span class="string">"uri"</span> prefix=<span class="string">"prefixOfTag"</span> /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="jsp-动作元素"><a class="markdownIt-Anchor" href="#jsp-动作元素"></a> JSP 动作元素</h2>
<p>JSP 动作元素是一组 JSP 内置的标签，只需要书写很少的标记代码就能使用 JSP 提供的丰富功能。JSP 动作元素是对常用的 JSP 功能的抽象与封装，包括两种，自定义 JSP 动作元素与标准 JSP 动作元素。</p>
<p>与 JSP 指令元素不同的是，JSP 动作元素在请求处理阶段起作用。JSP 动作元素是用 XML 语法写成的。</p>
<p>利用 JSP 动作可以动态地插入文件、重用 JavaBean 组件、把用户重定向到另外的页面、为 Java 插件生成 HTML 代码。</p>
<p>动作元素只有一种语法，它符合 XML 标准：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;jsp:action_name attribute=<span class="string">"value"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>动作元素基本上都是预定义的函数，JSP 规范定义了一系列的标准动作，它用 JSP 作为前缀，可用的标准动作元素如下：</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>jsp:include</td>
<td>在页面被请求的时候引入一个文件。</td>
</tr>
<tr>
<td>jsp:useBean</td>
<td>寻找或者实例化一个 JavaBean。</td>
</tr>
<tr>
<td>jsp:setProperty</td>
<td>设置 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:getProperty</td>
<td>输出某个 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:forward</td>
<td>把请求转到一个新的页面。</td>
</tr>
<tr>
<td>jsp:plugin</td>
<td>根据浏览器类型为 Java 插件生成 OBJECT 或 EMBED 标记。</td>
</tr>
<tr>
<td>jsp:element</td>
<td>定义动态 XML 元素</td>
</tr>
<tr>
<td>jsp:attribute</td>
<td>设置动态定义的 XML 元素属性。</td>
</tr>
<tr>
<td>jsp:body</td>
<td>设置动态定义的 XML 元素内容。</td>
</tr>
<tr>
<td>jsp:text</td>
<td>在 JSP 页面和文档中使用写入文本的模板</td>
</tr>
</tbody>
</table>
<h3 id="常见的属性"><a class="markdownIt-Anchor" href="#常见的属性"></a> 常见的属性</h3>
<p>所有的动作要素都有两个属性：id 属性和 scope 属性。</p>
<ul>
<li>**id 属性：**id 属性是动作元素的唯一标识，可以在 JSP 页面中引用。动作元素创建的 id 值可以通过 PageContext 来调用。</li>
<li>**scope 属性：**该属性用于识别动作元素的生命周期。 id 属性和 scope 属性有直接关系，scope 属性定义了相关联 id 对象的寿命。 scope 属性有四个可能的值： (a) page, (b)request, ©session, 和 (d) application。</li>
</ul>
<h3 id="jspinclude"><a class="markdownIt-Anchor" href="#jspinclude"></a> <code>&lt;jsp:include&gt;</code></h3>
<p><code>&lt;jsp:include&gt;</code> 用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。</p>
<p>如果被包含的文件为 JSP 程序，则会先执行 JSP 程序，再将执行结果包含进来。</p>
<p>语法格式如下：</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;jsp:include <span class="attribute">page</span>=<span class="string">"相对 URL 地址"</span> <span class="attribute">flush</span>=<span class="string">"true"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>前面已经介绍过 include 指令，它是在 JSP 文件被转换成 Servlet 的时候引入文件，而这里的 jsp:include 动作不同，插入文件的时间是在页面被请求的时候。</p>
<p>以下是 include 动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>包含在页面中的相对 URL 地址。</td>
</tr>
<tr>
<td>flush</td>
<td>布尔属性，定义在包含资源前是否刷新缓存区。</td>
</tr>
</tbody>
</table>
<p><strong>例</strong></p>
<p>以下我们定义了两个文件 <strong>date.jsp</strong> 和 <strong>main.jsp</strong>，代码如下所示：</p>
<p>date.jsp 文件代码：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">   今天的日期是: &lt;%= (<span class="keyword">new</span> java.util.Date())%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>main.jsp 文件代码：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;include 动作实例&lt;/h2&gt;</span><br><span class="line">&lt;jsp:include page=<span class="string">"date.jsp"</span> flush=<span class="string">"true"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">include 动作实例</span><br><span class="line"></span><br><span class="line">今天的日期是: <span class="number">2016</span><span class="number">-6</span><span class="number">-25</span> <span class="number">14</span>:<span class="number">08</span>:<span class="number">17</span></span><br></pre></td></tr></table></figure>
<h3 id="jspusebean"><a class="markdownIt-Anchor" href="#jspusebean"></a> <code>&lt;jsp:useBean&gt;</code></h3>
<p><strong>jsp:useBean</strong> 动作用来加载一个将在 JSP 页面中使用的 JavaBean。</p>
<p>这个功能非常有用，因为它使得我们可以发挥 Java 组件复用的优势。</p>
<p>jsp:useBean 动作最简单的语法为：</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;jsp:useBean <span class="built_in">id</span>=<span class="string">"name"</span> <span class="built_in">class</span>=<span class="string">"package.class"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>在类载入后，我们既可以通过 jsp:setProperty 和 jsp:getProperty 动作来修改和检索 bean 的属性。</p>
<p>以下是 useBean 动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td>指定 Bean 的完整包名。</td>
</tr>
<tr>
<td>type</td>
<td>指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td>beanName</td>
<td>通过 java.beans.Beans 的 instantiate() 方法指定 Bean 的名字。</td>
</tr>
</tbody>
</table>
<p>在给出具体实例前，让我们先来看下 jsp:setProperty 和 jsp:getProperty 动作元素：</p>
<h3 id="jspsetproperty"><a class="markdownIt-Anchor" href="#jspsetproperty"></a> <code>&lt;jsp:setProperty&gt;</code></h3>
<p>jsp:setProperty 用来设置已经实例化的 Bean 对象的属性，有两种用法。首先，你可以在 jsp:useBean 元素的外面（后面）使用 jsp:setProperty，如下所示：</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;jsp:useBean <span class="attribute">id</span>=<span class="string">"myName"</span> <span class="built_in">..</span>. /&gt;</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">&lt;jsp:setProperty <span class="attribute">name</span>=<span class="string">"myName"</span> <span class="attribute">property</span>=<span class="string">"someProperty"</span> <span class="built_in">..</span>./&gt;</span><br></pre></td></tr></table></figure>
<p>此时，不管 jsp:useBean 是找到了一个现有的 Bean，还是新创建了一个 Bean 实例，jsp:setProperty 都会执行。第二种用法是把 jsp:setProperty 放入 jsp:useBean 元素的内部，如下所示：</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">&lt;jsp<span class="function">:useBean</span> id=<span class="string">"myName"</span> <span class="string">...</span> &gt;</span><br><span class="line"><span class="string">...</span></span><br><span class="line">   &lt;jsp<span class="function">:setProperty</span> name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> <span class="string">.../</span>&gt;</span><br><span class="line">&lt;<span class="string">/jsp</span><span class="function">:useBean</span>&gt;</span><br></pre></td></tr></table></figure>
<p>此时，jsp:setProperty 只有在新建 Bean 实例时才会执行，如果是使用现有实例则不执行 jsp:setProperty。</p>
<p>jsp:setProperty 动作有下面四个属性,如下表：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>name 属性是必需的。它表示要设置属性的是哪个 Bean。</td>
</tr>
<tr>
<td>property</td>
<td>property 属性是必需的。它表示要设置哪个属性。有一个特殊用法：如果 property 的值是&quot;*&quot;，表示所有名字和 Bean 属性名字匹配的请求参数都将被传递给相应的属性 set 方法。</td>
</tr>
<tr>
<td>value</td>
<td>value 属性是可选的。该属性用来指定 Bean 属性的值。字符串数据会在目标类中通过标准的 valueOf 方法自动转换成数字、boolean、Boolean、 byte、Byte、char、Character。例如，boolean 和 Boolean 类型的属性值（比如&quot;true&quot;）通过 Boolean.valueOf 转换，int 和 Integer 类型的属性值（比如&quot;42&quot;）通过 Integer.valueOf 转换。 　　 value 和 param 不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td>param</td>
<td>param 是可选的。它指定用哪个请求参数作为 Bean 属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把 null 传递给 Bean 属性的 set 方法。因此，你可以让 Bean 自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody>
</table>
<h3 id="jspgetproperty"><a class="markdownIt-Anchor" href="#jspgetproperty"></a> <code>&lt;jsp:getProperty&gt;</code></h3>
<p>jsp:getProperty 动作提取指定 Bean 属性的值，转换成字符串，然后输出。语法格式如下：</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;jsp:useBean <span class="attribute">id</span>=<span class="string">"myName"</span> <span class="built_in">..</span>. /&gt;</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">&lt;jsp:getProperty <span class="attribute">name</span>=<span class="string">"myName"</span> <span class="attribute">property</span>=<span class="string">"someProperty"</span> <span class="built_in">..</span>./&gt;</span><br></pre></td></tr></table></figure>
<p>下表是与 getProperty 相关联的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>要检索的 Bean 属性名称。Bean 必须已定义。</td>
</tr>
<tr>
<td>property</td>
<td>表示要提取 Bean 属性的值</td>
</tr>
</tbody>
</table>
<p>实例</p>
<p>以下实例我们使用了 Bean:</p>
<figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBean</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">String</span> message = <span class="string">"菜鸟教程"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">String</span> getMessage() &#123;</span><br><span class="line">      <span class="keyword">return</span>(message);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> void setMessage(<span class="keyword">String</span> message) &#123;</span><br><span class="line">      <span class="built_in">this</span>.message = message;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译以上实例文件 TestBean.java ：</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">$ javac <span class="module-access"><span class="module"><span class="identifier">TestBean</span>.</span></span>java</span><br></pre></td></tr></table></figure>
<p>编译完成后会在当前目录下生成一个 <strong>TestBean.class</strong> 文件， 将该文件拷贝至当前 JSP 项目的 <strong>WebContent/WEB-INF/classes/com/runoob/main</strong> 下( com/runoob/main 包路径，没有需要手动创建)。</p>
<p>下面是一个 Eclipse 中目录结构图：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/6AC33FBA-0B76-4BFD-A690-E856E9E01900.jpg"></div>
<p>下面是一个很简单的例子，它的功能是装载一个 Bean，然后设置/读取它的 message 属性。</p>
<p>现在让我们在 main.jsp 文件中调用该 Bean:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Jsp 使用 JavaBean 实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:useBean</span> <span class="attr">id</span>=<span class="string">"test"</span> <span class="attr">class</span>=<span class="string">"com.runoob.main.TestBean"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:setProperty</span> <span class="attr">name</span>=<span class="string">"test"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">property</span>=<span class="string">"message"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">value</span>=<span class="string">"菜鸟教程..."</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>输出信息....<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:getProperty</span> <span class="attr">name</span>=<span class="string">"test"</span> <span class="attr">property</span>=<span class="string">"message"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>浏览器访问，执行以上文件，输出如下所示：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/D7AD87A8-3392-4D4E-8731-18806B0644CD.jpg"></div>
<h3 id="jspforward"><a class="markdownIt-Anchor" href="#jspforward"></a> <code>&lt;jsp:forward&gt;</code></h3>
<p>jsp:forward 动作把请求转到另外的页面。jsp:forward 标记只有一个属性 page。语法格式如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:forward</span> <span class="attr">page</span>=<span class="string">"相对 URL 地址"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>以下是 forward 相关联的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>page 属性包含的是一个相对 URL。page 的值既可以直接给出，也可以在请求的时候动态计算，可以是一个 JSP 页面或者一个 Java Servlet.</td>
</tr>
</tbody>
</table>
<p>实例</p>
<p>以下实例我们使用了两个文件，分别是： date.jsp 和 main.jsp。</p>
<p>date.jsp 文件代码如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">   今天的日期是: <span class="tag">&lt;<span class="name">%=</span> (<span class="attr">new</span> <span class="attr">java.util.Date</span>())<span class="attr">.toLocaleString</span>()%&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>main.jsp 文件代码：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>forward 动作实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:forward</span> <span class="attr">page</span>=<span class="string">"date.jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">今天的日期是: <span class="number">2016</span><span class="number">-6</span><span class="number">-25</span> <span class="number">14</span>:<span class="number">37</span>:<span class="number">25</span></span><br></pre></td></tr></table></figure>
<h3 id="jspplugin"><a class="markdownIt-Anchor" href="#jspplugin"></a> <code>&lt;jsp:plugin&gt;</code></h3>
<p>jsp:plugin 动作用来根据浏览器的类型，插入通过 Java 插件 运行 Java Applet 所必需的 OBJECT 或 EMBED 元素。</p>
<p>如果需要的插件不存在，它会下载插件，然后执行 Java 组件。 Java 组件可以是一个 applet 或一个 JavaBean。</p>
<p>plugin 动作有多个对应 HTML 元素的属性用于格式化 Java 组件。param 元素可用于向 Applet 或 Bean 传递参数。</p>
<p>以下是使用 plugin 动作元素的典型实例:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:plugin</span> <span class="attr">type</span>=<span class="string">"applet"</span> <span class="attr">codebase</span>=<span class="string">"dirname"</span> <span class="attr">code</span>=<span class="string">"MyApplet.class"</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">width</span>=<span class="string">"60"</span> <span class="attr">height</span>=<span class="string">"80"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:param</span> <span class="attr">name</span>=<span class="string">"fontcolor"</span> <span class="attr">value</span>=<span class="string">"red"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:param</span> <span class="attr">name</span>=<span class="string">"background"</span> <span class="attr">value</span>=<span class="string">"black"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:fallback</span>&gt;</span></span><br><span class="line">      Unable to initialize Java Plugin</span><br><span class="line">   <span class="tag">&lt;/<span class="name">jsp:fallback</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果你有兴趣可以尝试使用 applet 来测试 jsp:plugin 动作元素，<fallback>元素是一个新元素，在组件出现故障的错误是发送给用户错误信息。</fallback></p>
<h3 id="jspelement-jspattribute-jspbody"><a class="markdownIt-Anchor" href="#jspelement-jspattribute-jspbody"></a> <code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code></h3>
<p><a href="jsp:element" target="_blank" rel="noopener">jsp:element</a> 、 <a href="jsp:attribute" target="_blank" rel="noopener">jsp:attribute</a>、 <a href="jsp:body" target="_blank" rel="noopener">jsp:body</a>动作元素动态定义 XML 元素。动态是非常重要的，这就意味着 XML 元素在编译时是动态生成的而非静态。</p>
<p>以下实例动态定义了 XML 元素：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:element</span> <span class="attr">name</span>=<span class="string">"xmlElement"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:attribute</span> <span class="attr">name</span>=<span class="string">"xmlElementAttr"</span>&gt;</span></span><br><span class="line">   属性值</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:attribute</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:body</span>&gt;</span></span><br><span class="line">   XML 元素的主体</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:element</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>浏览器访问以下页面，输出结果如下所示：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg"></div>
<h3 id="jsptext"><a class="markdownIt-Anchor" href="#jsptext"></a> <code>&lt;jsp:text&gt;</code></h3>
<p><a href="jsp:text" target="_blank" rel="noopener">jsp:text</a>动作元素允许在 JSP 页面和文档中使用写入文本的模板，语法格式如下：</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;jsp:<span class="built_in">text</span>&gt;模板数据&lt;/jsp:<span class="built_in">text</span>&gt;</span><br></pre></td></tr></table></figure>
<p>以上文本模板不能包含其他元素，只能只能包含文本和 EL 表达式（注：EL 表达式将在后续章节中介绍）。请注意，在 XML 文件中，您不能使用表达式如 ${whatever &gt; 0}，因为&gt;符号是非法的。 你可以使用 ${whatever gt 0}表达式或者嵌入在一个 CDATA 部分的值。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:text</span>&gt;</span>&lt;![CDATA[&lt;br&gt;]]&gt;<span class="tag">&lt;/<span class="name">jsp:text</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果你需要在 XHTML 中声明 DOCTYPE,必须使用到<a href="jsp:text" target="_blank" rel="noopener">jsp:text</a>动作元素，实例如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:text</span>&gt;</span>&lt;![CDATA[&lt;!DOCTYPE html</span><br><span class="line">PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"</span><br><span class="line">"DTD/xhtml1-strict.dtd"&gt;]]&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>jsp:text action<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span><span class="tag">&lt;<span class="name">book</span>&gt;</span><span class="tag">&lt;<span class="name">jsp:text</span>&gt;</span></span><br><span class="line">    Welcome to JSP Programming</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:text</span>&gt;</span><span class="tag">&lt;/<span class="name">book</span>&gt;</span><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>你可以对以上实例尝试使用<a href="jsp:text" target="_blank" rel="noopener">jsp:text</a>及不使用该动作元素执行结果的区别。</p>
<h2 id="jsp-隐式对象"><a class="markdownIt-Anchor" href="#jsp-隐式对象"></a> JSP 隐式对象</h2>
<p>JSP 隐式对象是 JSP 容器为每个页面提供的 Java 对象，开发者可以直接使用它们而不用显式声明。JSP 隐式对象也被称为预定义变量。</p>
<p>JSP 所支持的九大隐式对象：</p>
<table>
<thead>
<tr>
<th><strong>对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td><strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td>response</td>
<td><strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td>out</td>
<td><strong>PrintWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td>session</td>
<td><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td>application</td>
<td><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td>config</td>
<td><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td>pageContext</td>
<td><strong>PageContext</strong>类的实例，提供对 JSP 页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td>page</td>
<td>类似于 Java 类中的 this 关键字</td>
</tr>
<tr>
<td>Exception</td>
<td><strong>Exception</strong>类的对象，代表发生错误的 JSP 页面中对应的异常对象</td>
</tr>
</tbody>
</table>
<h3 id="request-对象"><a class="markdownIt-Anchor" href="#request-对象"></a> request 对象</h3>
<p><code>request</code>对象是<code>javax.servlet.http.HttpServletRequest</code> 类的实例。</p>
<p>每当客户端请求一个 JSP 页面时，JSP 引擎就会制造一个新的<code>request</code>对象来代表这个请求。</p>
<p><code>request</code>对象提供了一系列方法来获取 HTTP 头信息，cookies，HTTP 方法等等。</p>
<h3 id="response-对象"><a class="markdownIt-Anchor" href="#response-对象"></a> response 对象</h3>
<p><code>response</code>对象是<code>javax.servlet.http.HttpServletResponse</code>类的实例。</p>
<p>当服务器创建<code>request</code>对象时会同时创建用于响应这个客户端的<code>response</code>对象。</p>
<p><code>response</code>对象也定义了处理 HTTP 头模块的接口。通过这个对象，开发者们可以添加新的 cookies，时间戳，HTTP 状态码等等。</p>
<h3 id="out-对象"><a class="markdownIt-Anchor" href="#out-对象"></a> out 对象</h3>
<p><code>out</code>对象是<code>javax.servlet.jsp.JspWriter</code>类的实例，用来在<code>response</code>对象中写入内容。</p>
<p>最初的<code>JspWriter</code>类对象根据页面是否有缓存来进行不同的实例化操作。可以在<code>page</code>指令中使用<code>buffered='false'</code>属性来轻松关闭缓存。</p>
<p><code>JspWriter</code>类包含了大部分<code>java.io.PrintWriter</code>类中的方法。不过，<code>JspWriter</code>新增了一些专为处理缓存而设计的方法。还有就是，<code>JspWriter</code>类会抛出<code>IOExceptions</code>异常，而<code>PrintWriter</code>不会。</p>
<p>下表列出了我们将会用来输出<code>boolean</code>，<code>char</code>，<code>int</code>，<code>double</code>，<code>String</code>，<code>object</code>等类型数据的重要方法：</p>
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>out.print(dataType dt)</strong></td>
<td>输出 Type 类型的值</td>
</tr>
<tr>
<td><strong>out.println(dataType dt)</strong></td>
<td>输出 Type 类型的值然后换行</td>
</tr>
<tr>
<td><strong>out.flush()</strong></td>
<td>刷新输出流</td>
</tr>
</tbody>
</table>
<h3 id="session-对象"><a class="markdownIt-Anchor" href="#session-对象"></a> session 对象</h3>
<p><code>session</code>对象是<code>javax.servlet.http.HttpSession</code>类的实例。和 Java Servlets 中的<code>session</code>对象有一样的行为。</p>
<p><code>session</code>对象用来跟踪在各个客户端请求间的会话。</p>
<h3 id="application-对象"><a class="markdownIt-Anchor" href="#application-对象"></a> application 对象</h3>
<p><code>application</code>对象直接包装了 servlet 的<code>ServletContext</code>类的对象，是<code>javax.servlet.ServletContext</code>类的实例。</p>
<p>这个对象在 JSP 页面的整个生命周期中都代表着这个 JSP 页面。这个对象在 JSP 页面初始化时被创建，随着<code>jspDestroy()</code>方法的调用而被移除。</p>
<p>通过向<code>application</code>中添加属性，则所有组成您 web 应用的 JSP 文件都能访问到这些属性。</p>
<h3 id="config-对象"><a class="markdownIt-Anchor" href="#config-对象"></a> config 对象</h3>
<p><code>config</code>对象是<code>javax.servlet.ServletConfig</code>类的实例，直接包装了 servlet 的<code>ServletConfig</code>类的对象。</p>
<p>这个对象允许开发者访问 Servlet 或者 JSP 引擎的初始化参数，比如文件路径等。</p>
<p>以下是 config 对象的使用方法，不是很重要，所以不常用：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">config.getServletName();</span><br></pre></td></tr></table></figure>
<p>它返回包含在<code>&lt;servlet-name&gt;</code>元素中的 servlet 名字，注意，<code>&lt;servlet-name&gt;</code>元素在<code>WEB-INF\web.xml</code>文件中定义。</p>
<h3 id="pagecontext-对象"><a class="markdownIt-Anchor" href="#pagecontext-对象"></a> pageContext 对象</h3>
<p><code>pageContext</code>对象是<code>javax.servlet.jsp.PageContext</code>类的实例，用来代表整个 JSP 页面。</p>
<p>这个对象主要用来访问页面信息，同时过滤掉大部分实现细节。</p>
<p>这个对象存储了<code>request</code>对象和<code>response</code>对象的引用。<code>application</code>对象，<code>config</code>对象，<code>session</code>对象，<code>out</code>对象可以通过访问这个对象的属性来导出。</p>
<p><code>pageContext</code>对象也包含了传给 JSP 页面的指令信息，包括缓存信息，ErrorPage URL,页面 scope 等。</p>
<p><code>PageContext</code>类定义了一些字段，包括 PAGE_SCOPE，REQUEST_SCOPE，SESSION_SCOPE， APPLICATION_SCOPE。它也提供了 40 余种方法，有一半继承自<code>javax.servlet.jsp.JspContext</code> 类。</p>
<p>其中一个重要的方法就是<code>removeArribute()</code>，它可接受一个或两个参数。比如，pageContext.removeArribute(“attrName”)移除四个 scope 中相关属性，但是下面这种方法只移除特定 scope 中的相关属性：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">pageContext.removeAttribute(<span class="string">"attrName"</span>, PAGE_SCOPE);</span><br></pre></td></tr></table></figure>
<h3 id="page-对象"><a class="markdownIt-Anchor" href="#page-对象"></a> page 对象</h3>
<p>这个对象就是页面实例的引用。它可以被看做是整个 JSP 页面的代表。</p>
<p><code>page</code>对象就是<code>this</code>对象的同义词。</p>
<h3 id="exception-对象"><a class="markdownIt-Anchor" href="#exception-对象"></a> exception 对象</h3>
<p><code>exception</code>对象包装了从先前页面中抛出的异常信息。它通常被用来产生对出错条件的适当响应。</p>
<h2 id="el-表达式"><a class="markdownIt-Anchor" href="#el-表达式"></a> EL 表达式</h2>
<p>EL 表达式是用<code>${}</code>括起来的脚本，用来更方便地读取对象。EL 表达式写在 JSP 的 HTML 代码中，而不能写在<code>&lt;%</code>与<code>%&gt;</code>引起的 JSP 脚本中。</p>
<p>JSP 表达式语言（EL）使得访问存储在 JavaBean 中的数据变得非常简单。JSP EL 既可以用来创建算术表达式也可以用来创建逻辑表达式。在 JSP EL 表达式内可以使用整型数，浮点数，字符串，常量 true、false，还有 null。</p>
<h3 id="一个简单的语法"><a class="markdownIt-Anchor" href="#一个简单的语法"></a> 一个简单的语法</h3>
<p>典型的，当您需要在 JSP 标签中指定一个属性值时，只需要简单地使用字符串即可：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;jsp:setProperty name=<span class="string">"box"</span> property=<span class="string">"perimeter"</span> value=<span class="string">"100"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>JSP EL 允许您指定一个表达式来表示属性值。一个简单的表达式语法如下：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">$&#123;expr&#125;</span><br></pre></td></tr></table></figure>
<p>其中，expr 指的是表达式。在 JSP EL 中通用的操作符是&quot;.“和”[]&quot;。这两个操作符允许您通过内嵌的 JSP 对象访问各种各样的 JavaBean 属性。</p>
<p>举例来说，上面的<a href="jsp:setProperty" target="_blank" rel="noopener">jsp:setProperty</a>标签可以使用表达式语言改写成如下形式：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;jsp:setProperty name=<span class="string">"box"</span> property=<span class="string">"perimeter"</span></span><br><span class="line">                 value=<span class="string">"$&#123;2*box.width+2*box.height&#125;"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>当 JSP 编译器在属性中见到&quot;${}&quot;格式后，它会产生代码来计算这个表达式，并且产生一个替代品来代替表达式的值。</p>
<p>您也可以在标签的模板文本中使用表达式语言。比如<a href="jsp:text" target="_blank" rel="noopener">jsp:text</a>标签简单地将其主体中的文本插入到 JSP 输出中：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;jsp:text&gt;</span><br><span class="line">&lt;h1&gt;Hello JSP!&lt;/h1&gt;</span><br><span class="line">&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>
<p>现在，在<a href="jsp:text" target="_blank" rel="noopener">jsp:text</a>标签主体中使用表达式，就像这样：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;jsp:text&gt;</span><br><span class="line">Box Perimeter is: $&#123;<span class="number">2</span>*box.width + <span class="number">2</span>*box.height&#125;</span><br><span class="line">&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>
<p>在 EL 表达式中可以使用圆括号来组织子表达式。比如 <code>${(1 + 2) _ 3}</code> 等于 9，但是 <code>${1 + (2 _ 3)}</code> 等于 7。</p>
<p>想要停用对 EL 表达式的评估的话，需要使用 page 指令将 isELIgnored 属性值设为 true：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page isELIgnored =<span class="string">"true|false"</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>这样，EL 表达式就会被忽略。若设为 false，则容器将会计算 EL 表达式。</p>
<h3 id="el-中的基础操作符"><a class="markdownIt-Anchor" href="#el-中的基础操作符"></a> EL 中的基础操作符</h3>
<p>EL 表达式支持大部分 Java 所提供的算术和逻辑操作符：</p>
<table>
<thead>
<tr>
<th><strong>操作符</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>访问一个 Bean 属性或者一个映射条目</td>
</tr>
<tr>
<td>[]</td>
<td>访问一个数组或者链表的元素</td>
</tr>
<tr>
<td>( )</td>
<td>组织一个子表达式以改变优先级</td>
</tr>
<tr>
<td>+</td>
<td>加</td>
</tr>
<tr>
<td>-</td>
<td>减或负</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
</tr>
<tr>
<td>/ or div</td>
<td>除</td>
</tr>
<tr>
<td>% or mod</td>
<td>取模</td>
</tr>
<tr>
<td>== or eq</td>
<td>测试是否相等</td>
</tr>
<tr>
<td>!= or ne</td>
<td>测试是否不等</td>
</tr>
<tr>
<td>&lt; or lt</td>
<td>测试是否小于</td>
</tr>
<tr>
<td>&gt; or gt</td>
<td>测试是否大于</td>
</tr>
<tr>
<td>&lt;= or le</td>
<td>测试是否小于等于</td>
</tr>
<tr>
<td>&gt;= or ge</td>
<td>测试是否大于等于</td>
</tr>
<tr>
<td>&amp;&amp; or and</td>
<td>测试逻辑与</td>
</tr>
<tr>
<td>|| or or</td>
<td>测试逻辑或</td>
</tr>
<tr>
<td>! or not</td>
<td>测试取反</td>
</tr>
<tr>
<td>empty</td>
<td>测试是否空值</td>
</tr>
</tbody>
</table>
<h3 id="jsp-el-中的函数"><a class="markdownIt-Anchor" href="#jsp-el-中的函数"></a> JSP EL 中的函数</h3>
<p>JSP EL 允许您在表达式中使用函数。这些函数必须被定义在自定义标签库中。函数的使用语法如下：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">$&#123;ns:func(param1, param2, ...)&#125;</span><br></pre></td></tr></table></figure>
<p>ns 指的是命名空间（namespace），func 指的是函数的名称，param1 指的是第一个参数，param2 指的是第二个参数，以此类推。比如，有函数 fn:length，在 JSTL 库中定义，可以像下面这样来获取一个字符串的长度：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">$&#123;fn:length(<span class="string">"Get my length"</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>要使用任何标签库中的函数，您需要将这些库安装在服务器中，然后使用 <code>&lt;taglib&gt;</code> 标签在 JSP 文件中包含这些库。</p>
<h3 id="jsp-el-隐含对象"><a class="markdownIt-Anchor" href="#jsp-el-隐含对象"></a> JSP EL 隐含对象</h3>
<p>JSP EL 支持下表列出的隐含对象：</p>
<table>
<thead>
<tr>
<th><strong>隐含对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>pageScope</td>
<td>page 作用域</td>
</tr>
<tr>
<td>requestScope</td>
<td>request 作用域</td>
</tr>
<tr>
<td>sessionScope</td>
<td>session 作用域</td>
</tr>
<tr>
<td>applicationScope</td>
<td>application 作用域</td>
</tr>
<tr>
<td>param</td>
<td>Request 对象的参数，字符串</td>
</tr>
<tr>
<td>paramValues</td>
<td>Request 对象的参数，字符串集合</td>
</tr>
<tr>
<td>header</td>
<td>HTTP 信息头，字符串</td>
</tr>
<tr>
<td>headerValues</td>
<td>HTTP 信息头，字符串集合</td>
</tr>
<tr>
<td>initParam</td>
<td>上下文初始化参数</td>
</tr>
<tr>
<td>cookie</td>
<td>Cookie 值</td>
</tr>
<tr>
<td>pageContext</td>
<td>当前页面的 pageContext</td>
</tr>
</tbody>
</table>
<p>您可以在表达式中使用这些对象，就像使用变量一样。接下来会给出几个例子来更好的理解这个概念。</p>
<h3 id="pagecontext-对象-2"><a class="markdownIt-Anchor" href="#pagecontext-对象-2"></a> pageContext 对象</h3>
<p>pageContext 对象是 JSP 中 pageContext 对象的引用。通过 pageContext 对象，您可以访问 request 对象。比如，访问 request 对象传入的查询字符串，就像这样：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">$&#123;pageContext.request.queryString&#125;</span><br></pre></td></tr></table></figure>
<h3 id="scope-对象"><a class="markdownIt-Anchor" href="#scope-对象"></a> Scope 对象</h3>
<p>pageScope，requestScope，sessionScope，applicationScope 变量用来访问存储在各个作用域层次的变量。</p>
<p>举例来说，如果您需要显式访问在 applicationScope 层的 box 变量，可以这样来访问：applicationScope.box。</p>
<h3 id="param-和-paramvalues-对象"><a class="markdownIt-Anchor" href="#param-和-paramvalues-对象"></a> param 和 paramValues 对象</h3>
<p>param 和 paramValues 对象用来访问参数值，通过使用 request.getParameter 方法和 request.getParameterValues 方法。</p>
<p>举例来说，访问一个名为 order 的参数，可以这样使用表达式：<code>${param.order}</code>，或者<code>${param[&quot;order&quot;]}</code>。</p>
<p>接下来的例子表明了如何访问 request 中的 username 参数：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String title = <span class="string">"Accessing Request Param"</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;&lt;% out.print(title); %&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">&lt;h1&gt;&lt;% out.print(title); %&gt;&lt;/h1&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;div align=<span class="string">"center"</span>&gt;</span><br><span class="line">&lt;p&gt;$&#123;param["username"]&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>param 对象返回单一的字符串，而 paramValues 对象则返回一个字符串数组。</p>
<h3 id="header-和-headervalues-对象"><a class="markdownIt-Anchor" href="#header-和-headervalues-对象"></a> header 和 headerValues 对象</h3>
<p>header 和 headerValues 对象用来访问信息头，通过使用 request.getHeader 方法和 request.getHeaders 方法。</p>
<p>举例来说，要访问一个名为 user-agent 的信息头，可以这样使用表达式：<code>${header.user-agent}</code>，或者 <code>${header[&quot;user-agent&quot;]}</code>。</p>
<p>接下来的例子表明了如何访问 user-agent 信息头：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String title = <span class="string">"User Agent Example"</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;&lt;% out.print(title); %&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">&lt;h1&gt;&lt;% out.print(title); %&gt;&lt;/h1&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;div align=<span class="string">"center"</span>&gt;</span><br><span class="line">&lt;p&gt;$&#123;header["user-agent"]&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<div align="center"><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-expression-language.jpg"></div>
<p>header 对象返回单一值，而 headerValues 则返回一个字符串数组。</p>
<h2 id="jstl"><a class="markdownIt-Anchor" href="#jstl"></a> JSTL</h2>
<p>JSP 标准标签库（JSTL）是一个 JSP 标签集合，它封装了 JSP 应用的通用核心功能。</p>
<p>JSTL 支持通用的、结构化的任务，比如迭代，条件判断，XML 文档操作，国际化标签，SQL 标签。 除了这些，它还提供了一个框架来使用集成 JSTL 的自定义标签。</p>
<p>根据 JSTL 标签所提供的功能，可以将其分为 5 个类别。</p>
<ul>
<li><strong>核心标签</strong></li>
<li><strong>格式化标签</strong></li>
<li><strong>SQL 标签</strong></li>
<li><strong>XML 标签</strong></li>
<li><strong>JSTL 函数</strong></li>
</ul>
<h3 id="jstl-库安装"><a class="markdownIt-Anchor" href="#jstl-库安装"></a> JSTL 库安装</h3>
<p>Apache Tomcat 安装 JSTL 库步骤如下：</p>
<p>从 Apache 的标准标签库中下载的二进包(jakarta-taglibs-standard-current.zip)。</p>
<ul>
<li>官方下载地址：<a href="http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/" target="_blank" rel="noopener">http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/</a></li>
<li>本站下载地址：<a href="http://static.runoob.com/download/jakarta-taglibs-standard-1.1.2.tar.gz" target="_blank" rel="noopener">jakarta-taglibs-standard-1.1.2.zip</a></li>
</ul>
<p>下载 <strong>jakarta-taglibs-standard-1.1.2.zip</strong> 包并解压，将 <strong>jakarta-taglibs-standard-1.1.2/lib/</strong> 下的两个 jar 文件：<strong>standard.jar</strong> 和 <strong>jstl.jar</strong> 文件拷贝到 <strong>/WEB-INF/lib/</strong> 下。</p>
<p>将 tld 下的需要引入的 tld 文件复制到 WEB-INF 目录下。</p>
<p>接下来我们在 web.xml 文件中添加以下配置：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">"2.4"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/j2ee"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/j2ee</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/fmt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/fmt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/fmt-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/fmt-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/core<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/c.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/core-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/c-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/sql<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/sql.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/sql-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/sql-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/x<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/x.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/x-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/x-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">jsp-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用任何库，你必须在每个 JSP 文件中的头部包含 <strong><taglib></taglib></strong> 标签。</p>
<h3 id="核心标签"><a class="markdownIt-Anchor" href="#核心标签"></a> 核心标签</h3>
<p>核心标签是最常用的 JSTL 标签。引用核心标签库的语法如下：</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">&lt;<span class="meta">%</span>@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> <span class="meta">%</span>&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-out-tag.html" target="_blank" rel="noopener"><code>&lt;c:out&gt;</code></a></td>
<td style="text-align:left">用于在 JSP 中显示数据，就像&lt;%= … &gt;</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-set-tag.html" target="_blank" rel="noopener"><code>&lt;c:set&gt;</code></a></td>
<td style="text-align:left">用于保存数据</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-remove-tag.html" target="_blank" rel="noopener"><code>&lt;c:remove&gt;</code></a></td>
<td style="text-align:left">用于删除数据</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-catch-tag.html" target="_blank" rel="noopener"><code>&lt;c:catch&gt;</code></a></td>
<td style="text-align:left">用来处理产生错误的异常状况，并且将错误信息储存起来</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-if-tag.html" target="_blank" rel="noopener"><code>&lt;c:if&gt;</code></a></td>
<td style="text-align:left">与我们在一般程序中用的 if 一样</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-choose-tag.html" target="_blank" rel="noopener"><code>&lt;c:choose&gt;</code></a></td>
<td style="text-align:left">本身只当做&lt;c:when&gt;和&lt;c:otherwise&gt;的父标签</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-choose-tag.html" target="_blank" rel="noopener"><code>&lt;c:when&gt;</code></a></td>
<td style="text-align:left">&lt;c:choose&gt;的子标签，用来判断条件是否成立</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-choose-tag.html" target="_blank" rel="noopener"><code>&lt;c:otherwise&gt;</code></a></td>
<td style="text-align:left">&lt;c:choose&gt;的子标签，接在&lt;c:when&gt;标签后，当&lt;c:when&gt;标签判断为 false 时被执行</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-import-tag.html" target="_blank" rel="noopener"><code>&lt;c:import&gt;</code></a></td>
<td style="text-align:left">检索一个绝对或相对 URL，然后将其内容暴露给页面</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html" target="_blank" rel="noopener"><code>&lt;c:forEach&gt;</code></a></td>
<td style="text-align:left">基础迭代标签，接受多种集合类型</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html" target="_blank" rel="noopener"><code>&lt;c:forTokens&gt;</code></a></td>
<td style="text-align:left">根据指定的分隔符来分隔内容并迭代输出</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-param-tag.html" target="_blank" rel="noopener"><code>&lt;c:param&gt;</code></a></td>
<td style="text-align:left">用来给包含或重定向的页面传递参数</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-redirect-tag.html" target="_blank" rel="noopener"><code>&lt;c:redirect&gt;</code></a></td>
<td style="text-align:left">重定向至一个新的 URL.</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-core-url-tag.html" target="_blank" rel="noopener"><code>&lt;c:url&gt;</code></a></td>
<td style="text-align:left">使用可选的查询参数来创造一个 URL</td>
</tr>
</tbody>
</table>
<h3 id="格式化标签"><a class="markdownIt-Anchor" href="#格式化标签"></a> 格式化标签</h3>
<p>JSTL 格式化标签用来格式化并输出文本、日期、时间、数字。引用格式化标签库的语法如下：</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">&lt;<span class="meta">%</span>@ taglib prefix=<span class="string">"fmt"</span></span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/fmt"</span> <span class="meta">%</span>&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-formatnumber-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:formatNumber&gt;</code></a></td>
<td style="text-align:left">使用指定的格式或精度格式化数字</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-parsenumber-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:parseNumber&gt;</code></a></td>
<td style="text-align:left">解析一个代表着数字，货币或百分比的字符串</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-formatdate-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:formatDate&gt;</code></a></td>
<td style="text-align:left">使用指定的风格或模式格式化日期和时间</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-parsedate-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:parseDate&gt;</code></a></td>
<td style="text-align:left">解析一个代表着日期或时间的字符串</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-bundle-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:bundle&gt;</code></a></td>
<td style="text-align:left">绑定资源</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-setlocale-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:setLocale&gt;</code></a></td>
<td style="text-align:left">指定地区</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-setbundle-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:setBundle&gt;</code></a></td>
<td style="text-align:left">绑定资源</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-timezone-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:timeZone&gt;</code></a></td>
<td style="text-align:left">指定时区</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-settimezone-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:setTimeZone&gt;</code></a></td>
<td style="text-align:left">指定时区</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-message-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:message&gt;</code></a></td>
<td style="text-align:left">显示资源配置文件信息</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-format-requestencoding-tag.html" target="_blank" rel="noopener"><code>&lt;fmt:requestEncoding&gt;</code></a></td>
<td style="text-align:left">设置 request 的字符编码</td>
</tr>
</tbody>
</table>
<h3 id="sql-标签"><a class="markdownIt-Anchor" href="#sql-标签"></a> SQL 标签</h3>
<p>JSTL SQL 标签库提供了与关系型数据库（Oracle，MySQL，SQL Server 等等）进行交互的标签。引用 SQL 标签库的语法如下：</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">&lt;<span class="meta">%</span>@ taglib prefix=<span class="string">"sql"</span></span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/sql"</span> <span class="meta">%</span>&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-sql-setdatasource-tag.html" target="_blank" rel="noopener"><code>&lt;sql:setDataSource&gt;</code></a></td>
<td style="text-align:left">指定数据源</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-sql-query-tag.html" target="_blank" rel="noopener"><code>&lt;sql:query&gt;</code></a></td>
<td style="text-align:left">运行 SQL 查询语句</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-sql-update-tag.html" target="_blank" rel="noopener"><code>&lt;sql:update&gt;</code></a></td>
<td style="text-align:left">运行 SQL 更新语句</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-sql-param-tag.html" target="_blank" rel="noopener"><code>&lt;sql:param&gt;</code></a></td>
<td style="text-align:left">将 SQL 语句中的参数设为指定值</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-sql-dateparam-tag.html" target="_blank" rel="noopener"><code>&lt;sql:dateParam&gt;</code></a></td>
<td style="text-align:left">将 SQL 语句中的日期参数设为指定的 java.util.Date 对象值</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-sql-transaction-tag.html" target="_blank" rel="noopener"><code>&lt;sql:transaction&gt;</code></a></td>
<td style="text-align:left">在共享数据库连接中提供嵌套的数据库行为元素，将所有语句以一个事务的形式来运行</td>
</tr>
</tbody>
</table>
<h3 id="xml-标签"><a class="markdownIt-Anchor" href="#xml-标签"></a> XML 标签</h3>
<p>JSTL XML 标签库提供了创建和操作 XML 文档的标签。引用 XML 标签库的语法如下：</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">&lt;<span class="meta">%</span>@ taglib prefix=<span class="string">"x"</span></span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/xml"</span> <span class="meta">%</span>&gt;</span><br></pre></td></tr></table></figure>
<p>在使用 xml 标签前，你必须将 XML 和 XPath 的相关包拷贝至你的&lt;Tomcat 安装目录&gt;\lib 下:</p>
<ul>
<li>
<p>XercesImpl.jar</p>
<p>下载地址： <a href="http://www.apache.org/dist/xerces/j/" target="_blank" rel="noopener">http://www.apache.org/dist/xerces/j/</a></p>
</li>
<li>
<p>xalan.jar</p>
<p>下载地址： <a href="http://xml.apache.org/xalan-j/index.html" target="_blank" rel="noopener">http://xml.apache.org/xalan-j/index.html</a></p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-out-tag.html" target="_blank" rel="noopener"><code>&lt;x:out&gt;</code></a></td>
<td style="text-align:left">与&lt;%= … &gt;,类似，不过只用于 XPath 表达式</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-parse-tag.html" target="_blank" rel="noopener"><code>&lt;x:parse&gt;</code></a></td>
<td style="text-align:left">解析 XML 数据</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-set-tag.html" target="_blank" rel="noopener"><code>&lt;x:set&gt;</code></a></td>
<td style="text-align:left">设置 XPath 表达式</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-if-tag.html" target="_blank" rel="noopener"><code>&lt;x:if&gt;</code></a></td>
<td style="text-align:left">判断 XPath 表达式，若为真，则执行本体中的内容，否则跳过本体</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-foreach-tag.html" target="_blank" rel="noopener"><code>&lt;x:forEach&gt;</code></a></td>
<td style="text-align:left">迭代 XML 文档中的节点</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html" target="_blank" rel="noopener"><code>&lt;x:choose&gt;</code></a></td>
<td style="text-align:left">&lt;x:when&gt;和&lt;x:otherwise&gt;的父标签</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html" target="_blank" rel="noopener"><code>&lt;x:when&gt;</code></a></td>
<td style="text-align:left">&lt;x:choose&gt;的子标签，用来进行条件判断</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html" target="_blank" rel="noopener"><code>&lt;x:otherwise&gt;</code></a></td>
<td style="text-align:left">&lt;x:choose&gt;的子标签，当&lt;x:when&gt;判断为 false 时被执行</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-transform-tag.html" target="_blank" rel="noopener"><code>&lt;x:transform&gt;</code></a></td>
<td style="text-align:left">将 XSL 转换应用在 XML 文档中</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-xml-param-tag.html" target="_blank" rel="noopener"><code>&lt;x:param&gt;</code></a></td>
<td style="text-align:left">与&lt;x:transform&gt;共同使用，用于设置 XSL 样式表</td>
</tr>
</tbody>
</table>
<h3 id="jstl-函数"><a class="markdownIt-Anchor" href="#jstl-函数"></a> JSTL 函数</h3>
<p>JSTL 包含一系列标准函数，大部分是通用的字符串处理函数。引用 JSTL 函数库的语法如下：</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">&lt;<span class="meta">%</span>@ taglib prefix=<span class="string">"fn"</span></span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/functions"</span> <span class="meta">%</span>&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-contains.html" target="_blank" rel="noopener">fn:contains()</a></td>
<td style="text-align:left">测试输入的字符串是否包含指定的子串</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-containsignoreCase.html" target="_blank" rel="noopener">fn:containsIgnoreCase()</a></td>
<td style="text-align:left">测试输入的字符串是否包含指定的子串，大小写不敏感</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-endswith.html" target="_blank" rel="noopener">fn:endsWith()</a></td>
<td style="text-align:left">测试输入的字符串是否以指定的后缀结尾</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-escapexml.html" target="_blank" rel="noopener">fn:escapeXml()</a></td>
<td style="text-align:left">跳过可以作为 XML 标记的字符</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-indexof.html" target="_blank" rel="noopener">fn:indexOf()</a></td>
<td style="text-align:left">返回指定字符串在输入字符串中出现的位置</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-join.html" target="_blank" rel="noopener">fn:join()</a></td>
<td style="text-align:left">将数组中的元素合成一个字符串然后输出</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-length.html" target="_blank" rel="noopener">fn:length()</a></td>
<td style="text-align:left">返回字符串长度</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-replace.html" target="_blank" rel="noopener">fn:replace()</a></td>
<td style="text-align:left">将输入字符串中指定的位置替换为指定的字符串然后返回</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-split.html" target="_blank" rel="noopener">fn:split()</a></td>
<td style="text-align:left">将字符串用指定的分隔符分隔然后组成一个子字符串数组并返回</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-startswith.html" target="_blank" rel="noopener">fn:startsWith()</a></td>
<td style="text-align:left">测试输入字符串是否以指定的前缀开始</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-substring.html" target="_blank" rel="noopener">fn:substring()</a></td>
<td style="text-align:left">返回字符串的子集</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-substringafter.html" target="_blank" rel="noopener">fn:substringAfter()</a></td>
<td style="text-align:left">返回字符串在指定子串之后的子集</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-substringbefore.html" target="_blank" rel="noopener">fn:substringBefore()</a></td>
<td style="text-align:left">返回字符串在指定子串之前的子集</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-tolowercase.html" target="_blank" rel="noopener">fn:toLowerCase()</a></td>
<td style="text-align:left">将字符串中的字符转为小写</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-touppercase.html" target="_blank" rel="noopener">fn:toUpperCase()</a></td>
<td style="text-align:left">将字符串中的字符转为大写</td>
</tr>
<tr>
<td style="text-align:left"><a href="http://www.runoob.com/jsp/jstl-function-trim.html" target="_blank" rel="noopener">fn:trim()</a></td>
<td style="text-align:left">移除首尾的空白符</td>
</tr>
</tbody>
</table>
<h2 id="taglib"><a class="markdownIt-Anchor" href="#taglib"></a> Taglib</h2>
<h3 id="jsp-自定义标签"><a class="markdownIt-Anchor" href="#jsp-自定义标签"></a> JSP 自定义标签</h3>
<p>自定义标签是用户定义的 JSP 语言元素。当 JSP 页面包含一个自定义标签时将被转化为 servlet，标签转化为对被 称为 tag handler 的对象的操作，即当 servlet 执行时 Web container 调用那些操作。</p>
<p>JSP 标签扩展可以让你创建新的标签并且可以直接插入到一个 JSP 页面。 JSP 2.0 规范中引入 Simple Tag Handlers 来编写这些自定义标记。</p>
<p>你可以继承 SimpleTagSupport 类并重写的 doTag()方法来开发一个最简单的自定义标签。</p>
<h3 id="创建hello标签"><a class="markdownIt-Anchor" href="#创建hello标签"></a> 创建&quot;Hello&quot;标签</h3>
<p>接下来，我们想创建一个自定义标签叫作<a href="ex:Hello" target="_blank" rel="noopener">ex:Hello</a>，标签格式为：</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="section">&lt;ex:Hello /&gt;</span></span><br></pre></td></tr></table></figure>
<p>要创建自定义的 JSP 标签，你首先必须创建处理标签的 Java 类。所以，让我们创建一个 HelloTag 类，如下所示：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  public void doTag() <span class="keyword">throws</span> <span class="type">JspException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">    <span class="type">JspWriter</span> out = getJspContext().getOut();</span><br><span class="line">    out.println(<span class="string">"Hello Custom Tag!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以下代码重写了 doTag()方法，方法中使用了 getJspContext()方法来获取当前的 JspContext 对象，并将&quot;Hello Custom Tag!&quot;传递给 JspWriter 对象。</p>
<p>编译以上类，并将其复制到环境变量 CLASSPATH 目录中。最后创建如下标签库：<code>&lt;Tomcat安装目录&gt;webapps\ROOT\WEB-INF\custom.tld</code>。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>empty<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接下来，我们就可以在 JSP 文件中使用 Hello 标签：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"ex"</span> <span class="attr">uri</span>=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>A sample custom tag<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ex:Hello</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上程序输出结果为：</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">Hello Custom <span class="keyword">Tag</span>!</span><br></pre></td></tr></table></figure>
<h3 id="访问标签体"><a class="markdownIt-Anchor" href="#访问标签体"></a> 访问标签体</h3>
<p>你可以像标准标签库一样在标签中包含消息内容。如我们要在我们自定义的 Hello 中包含内容，格式如下：</p>
<figure class="highlight mizar"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">ex</span>:Hello&gt;</span><br><span class="line">   This <span class="keyword">is</span> message body</span><br><span class="line">&lt;/<span class="keyword">ex</span>:Hello&gt;</span><br></pre></td></tr></table></figure>
<p>我们可以修改标签处理类文件，代码如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">StringWriter</span> sw = <span class="keyword">new</span> <span class="type">StringWriter</span>();</span><br><span class="line">   public void doTag()</span><br><span class="line">      <span class="keyword">throws</span> <span class="type">JspException</span>, <span class="type">IOException</span></span><br><span class="line">    &#123;</span><br><span class="line">       getJspBody().invoke(sw);</span><br><span class="line">       getJspContext().getOut().println(sw.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来我们需要修改 TLD 文件，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD with Body<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>现在我们可以在 JSP 使用修改后的标签，如下所示:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"ex"</span> <span class="attr">uri</span>=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>A sample custom tag<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ex:Hello</span>&gt;</span></span><br><span class="line">        This is message body</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ex:Hello</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上程序输出结果如下所示：</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">This <span class="keyword">is</span> message <span class="keyword">body</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义标签属性"><a class="markdownIt-Anchor" href="#自定义标签属性"></a> 自定义标签属性</h3>
<p>你可以在自定义标准中设置各种属性，要接收属性，值自定义标签类必须实现 setter 方法， JavaBean 中的 setter 方法如下所示：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="type">String</span> message;</span><br><span class="line"></span><br><span class="line">   public void setMessage(<span class="type">String</span> msg) &#123;</span><br><span class="line">      <span class="keyword">this</span>.message = msg;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="type">StringWriter</span> sw = <span class="keyword">new</span> <span class="type">StringWriter</span>();</span><br><span class="line"></span><br><span class="line">   public void doTag()</span><br><span class="line">      <span class="keyword">throws</span> <span class="type">JspException</span>, <span class="type">IOException</span></span><br><span class="line">    &#123;</span><br><span class="line">       <span class="keyword">if</span> (message != <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="comment">/* 从属性中使用消息 */</span></span><br><span class="line">          <span class="type">JspWriter</span> out = getJspContext().getOut();</span><br><span class="line">          out.println( message );</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">/* 从内容体中使用消息 */</span></span><br><span class="line">          getJspBody().invoke(sw);</span><br><span class="line">          getJspContext().getOut().println(sw.toString());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>属性的名称是&quot;message&quot;，所以 setter 方法是的 setMessage()。现在让我们在 TLD 文件中使用的<attribute>元素添加此属性：</attribute></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD with Body<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>message<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>现在我们就可以在 JSP 文件中使用 message 属性了，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"ex"</span> <span class="attr">uri</span>=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>A sample custom tag<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ex:Hello</span> <span class="attr">message</span>=<span class="string">"This is custom tag"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上实例数据输出结果为：</p>
<figure class="highlight pony"><table><tr><td class="code"><pre><span class="line"><span class="type">This</span> <span class="keyword">is</span> custom <span class="meta">tag</span></span><br></pre></td></tr></table></figure>
<p>你还可以包含以下属性：</p>
<table>
<thead>
<tr>
<th style="text-align:left">属性</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">定义属性的名称。每个标签的是属性名称必须是唯一的。</td>
</tr>
<tr>
<td style="text-align:left">required</td>
<td style="text-align:left">指定属性是否是必须的或者可选的,如果设置为 false 为可选。</td>
</tr>
<tr>
<td style="text-align:left">rtexprvalue</td>
<td style="text-align:left">声明在运行表达式时，标签属性是否有效。</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">定义该属性的 Java 类类型 。默认指定为 <strong>String</strong></td>
</tr>
<tr>
<td style="text-align:left">description</td>
<td style="text-align:left">描述信息</td>
</tr>
<tr>
<td style="text-align:left">fragment</td>
<td style="text-align:left">如果声明了该属性,属性值将被视为一个 <strong>JspFragment</strong>。</td>
</tr>
</tbody>
</table>
<p>以下是指定相关的属性实例：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">.....</span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>attribute_name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.util.Date<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fragment</span>&gt;</span>false<span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<p>如果你使用了两个属性，修改 TLD 文件，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">.....</span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>attribute_name1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.util.Boolean<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fragment</span>&gt;</span>false<span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>attribute_name2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">required</span>&gt;</span>true<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.util.Date<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

      
    </div>

    
      


    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/java/" rel="tag"># java</a>
          
            <a href="/blog/tags/javaweb/" rel="tag"># javaweb</a>
          
            <a href="/blog/tags/javaee/" rel="tag"># javaee</a>
          
            <a href="/blog/tags/jsp/" rel="tag"># jsp</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2017/11/08/java/javaweb/spring/integration/spring-and-cache/" rel="next" title="Spring 集成缓存">
                <i class="fa fa-chevron-left"></i> Spring 集成缓存
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2017/11/08/java/javaweb/spring/integration/spring-and-scheduler/" rel="prev" title="Spring 集成调度器">
                Spring 集成调度器 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/blog/images/avatar.gif" alt="Zhang Peng">
            
              <p class="site-author-name" itemprop="name">Zhang Peng</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/blog/archives/">
                
                    <span class="site-state-item-count">288</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/blog/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">34</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/blog/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">130</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/blog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/dunwu" title="GitHub &rarr; https://github.com/dunwu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:forbreak@163.com" title="E-Mail &rarr; mailto:forbreak@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#jsp-教程"><span class="nav-text"> JSP 教程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#简介"><span class="nav-text"> 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是-java-server-pages"><span class="nav-text"> 什么是 Java Server Pages?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么使用-jsp"><span class="nav-text"> 为什么使用 JSP？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-的优势"><span class="nav-text"> JSP 的优势</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp-工作原理"><span class="nav-text"> JSP 工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-工作流程"><span class="nav-text"> JSP 工作流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#工作步骤"><span class="nav-text"> 工作步骤</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-生命周期"><span class="nav-text"> JSP 生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#jsp-编译"><span class="nav-text"> JSP 编译</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#jsp-初始化"><span class="nav-text"> JSP 初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#jsp-执行"><span class="nav-text"> JSP 执行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#jsp-清理"><span class="nav-text"> JSP 清理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#语法"><span class="nav-text"> 语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#脚本"><span class="nav-text"> 脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#中文编码问题"><span class="nav-text"> 中文编码问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-声明"><span class="nav-text"> JSP 声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-表达式"><span class="nav-text"> JSP 表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-注释"><span class="nav-text"> JSP 注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#控制语句"><span class="nav-text"> 控制语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ifelse-语句"><span class="nav-text"> if…else 语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#switchcase-语句"><span class="nav-text"> switch…case 语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#循环语句"><span class="nav-text"> 循环语句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-字面量"><span class="nav-text"> JSP 字面量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令"><span class="nav-text"> 指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#page-指令"><span class="nav-text"> Page 指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#属性"><span class="nav-text"> 属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#include-指令"><span class="nav-text"> Include 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#taglib-指令"><span class="nav-text"> Taglib 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp-动作元素"><span class="nav-text"> JSP 动作元素</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常见的属性"><span class="nav-text"> 常见的属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jspinclude"><span class="nav-text"> &lt;jsp:include&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jspusebean"><span class="nav-text"> &lt;jsp:useBean&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jspsetproperty"><span class="nav-text"> &lt;jsp:setProperty&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jspgetproperty"><span class="nav-text"> &lt;jsp:getProperty&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jspforward"><span class="nav-text"> &lt;jsp:forward&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jspplugin"><span class="nav-text"> &lt;jsp:plugin&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jspelement-jspattribute-jspbody"><span class="nav-text"> &lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、&lt;jsp:body&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsptext"><span class="nav-text"> &lt;jsp:text&gt;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp-隐式对象"><span class="nav-text"> JSP 隐式对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#request-对象"><span class="nav-text"> request 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#response-对象"><span class="nav-text"> response 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#out-对象"><span class="nav-text"> out 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#session-对象"><span class="nav-text"> session 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#application-对象"><span class="nav-text"> application 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#config-对象"><span class="nav-text"> config 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pagecontext-对象"><span class="nav-text"> pageContext 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#page-对象"><span class="nav-text"> page 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exception-对象"><span class="nav-text"> exception 对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#el-表达式"><span class="nav-text"> EL 表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一个简单的语法"><span class="nav-text"> 一个简单的语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#el-中的基础操作符"><span class="nav-text"> EL 中的基础操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-el-中的函数"><span class="nav-text"> JSP EL 中的函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-el-隐含对象"><span class="nav-text"> JSP EL 隐含对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pagecontext-对象-2"><span class="nav-text"> pageContext 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scope-对象"><span class="nav-text"> Scope 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#param-和-paramvalues-对象"><span class="nav-text"> param 和 paramValues 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#header-和-headervalues-对象"><span class="nav-text"> header 和 headerValues 对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jstl"><span class="nav-text"> JSTL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jstl-库安装"><span class="nav-text"> JSTL 库安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#核心标签"><span class="nav-text"> 核心标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#格式化标签"><span class="nav-text"> 格式化标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sql-标签"><span class="nav-text"> SQL 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xml-标签"><span class="nav-text"> XML 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jstl-函数"><span class="nav-text"> JSTL 函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#taglib"><span class="nav-text"> Taglib</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-自定义标签"><span class="nav-text"> JSP 自定义标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建hello标签"><span class="nav-text"> 创建&quot;Hello&quot;标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#访问标签体"><span class="nav-text"> 访问标签体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义标签属性"><span class="nav-text"> 自定义标签属性</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-paper-plane"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Peng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">2m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">30:27</span>
  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
      
    
  
  <script color="107,97,95" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1.0.0/canvas-nest.min.js"></script>











  



  
  <script src="/blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1/reading_progress.min.js"></script>


  


  <script src="/blog/js/src/utils.js?v=7.0.1"></script>

  <script src="/blog/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/blog/js/src/schemes/muse.js?v=7.0.1"></script>



  
  <script src="/blog/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/blog/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/blog/js/src/bootstrap.js?v=7.0.1"></script>


  
  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.scrollToMark('auto', "#更多");
  
  </script>


  

</body>
</html>
